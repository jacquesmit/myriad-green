<!DOCTYPE html>
<html>
<head>
    <title>Weather Debug Test</title>
</head>
<body>
    <h1>Weather Debug Test</h1>
    
    <div
        id="weather-widget"
        class="weather-widget"
        data-suburb="Johannesburg"
        data-country="ZA"
        data-units="metric"
        data-cache-mins="120"
        data-stale-mins="240"
        data-theme="green"
        data-tone="elevated"
        data-icon="#16a34a"
    ></div>

    <!-- Weather section for new design -->
    <div class="weather-grid">
        <div class="weather-card weather-card--primary">
            <div class="weather-card-header">
                <div class="weather-location-info">
                    <span class="location-name">Test Location</span>
                    <span class="update-time" id="current-time">Loading...</span>
                </div>
            </div>
            <div class="weather-current-display">
                <div class="weather-main-info">
                    <div class="weather-temperature">
                        <span id="current-temp" class="temp-value">--°</span>
                        <span class="temp-unit">C</span>
                    </div>
                </div>
                <div class="weather-description-info">
                    <div id="weather-description" class="weather-condition">Loading...</div>
                    <div id="feels-like" class="feels-like-temp">Feels like --°C</div>
                </div>
            </div>
            <div class="weather-metrics-grid">
                <div class="weather-metric" data-metric="humidity">
                    <div class="metric-info">
                        <span class="metric-label">Humidity</span>
                        <span id="humidity" class="metric-value">--%</span>
                    </div>
                </div>
                <div class="weather-metric" data-metric="wind">
                    <div class="metric-info">
                        <span class="metric-label">Wind</span>
                        <span id="wind-speed" class="metric-value">-- km/h</span>
                    </div>
                </div>
                <div class="weather-metric" data-metric="pressure">
                    <div class="metric-info">
                        <span class="metric-label">Pressure</span>
                        <span id="pressure" class="metric-value">-- hPa</span>
                    </div>
                </div>
                <div class="weather-metric" data-metric="visibility">
                    <div class="metric-info">
                        <span class="metric-label">Visibility</span>
                        <span id="visibility" class="metric-value">-- km</span>
                    </div>
                </div>
            </div>
            <div class="advice-text" id="irrigation-recommendation">Loading irrigation recommendations...</div>
        </div>
    </div>

    <script src="js/weather-widget.js"></script>
    
    <script>
        // Manual test after DOM is loaded
        setTimeout(() => {
            console.log('=== MANUAL DEBUG TEST ===');
            console.log('Weather widget element:', document.getElementById('weather-widget'));
            console.log('Current temp element:', document.getElementById('current-temp'));
            console.log('Weather description element:', document.getElementById('weather-description'));
            
            // Try to manually trigger a weather fetch
            fetch('/api/weather')
                .then(response => response.json())
                .then(data => {
                    console.log('Manual weather API test:', data);
                    // Try to manually update an element
                    const tempEl = document.getElementById('current-temp');
                    if (tempEl && data.tempC) {
                        tempEl.textContent = data.tempC;
                        console.log('Manually updated temperature to:', data.tempC);
                    }
                })
                .catch(err => console.error('Manual weather test failed:', err));
        }, 2000);
    </script>
</body>
</html>